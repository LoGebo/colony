<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Recovery - Lumina</title>
    <meta name="view-transition" content="same-origin">
    <link rel="prefetch" href="https://p.superdesign.dev/draft/c6843c32-7c38-41c2-82c2-dc47929810cc" as="document">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@900,700,500,400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Satoshi', sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        
        /* iOS-style Input Focus Ring */
        .ios-input:focus-within {
            border-color: #2563EB;
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
            transform: translateY(-1px);
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        /* Step Transitions */
        .step-view {
            transition: all 400ms cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        /* View Transitions */
        @view-transition { navigation: auto; }
        ::view-transition-old(main-content) { animation: 0.25s ease-out both fade-out; }
        ::view-transition-new(main-content) { animation: 0.25s ease-in 0.1s both fade-in; }
        @keyframes fade-out { from { opacity: 1; } to { opacity: 0; } }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }

        ::-webkit-scrollbar { width: 0px; background: transparent; }

        /* Code Input Animation */
        .code-input:focus {
            border-color: #2563EB;
            background: #EFF6FF;
        }
    </style>
</head>
<body class="bg-[#F1F5F9]">

    <!-- Background Ambiance (Persistent Style) -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div class="absolute -top-[10%] left-[-10%] w-[120%] h-[60%] bg-gradient-to-b from-blue-100/50 via-teal-50/30 to-transparent blur-3xl"></div>
        <div class="absolute top-[10%] right-[-20%] w-[300px] h-[300px] bg-blue-400/10 rounded-full blur-[80px]"></div>
        <div class="absolute bottom-[20%] left-[-10%] w-[350px] h-[350px] bg-teal-300/10 rounded-full blur-[90px]"></div>
    </div>

    <div id="root-container" class="relative z-10 w-full min-h-screen flex flex-col pt-14 pb-[34px] overflow-x-hidden" style="view-transition-name: main-content;">
        
        <!-- Header Area -->
        <header class="px-6 flex items-center justify-between mb-8">
            <a id="back-to-login" href="https://p.superdesign.dev/draft/c6843c32-7c38-41c2-82c2-dc47929810cc" class="w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-600 shadow-sm active:scale-90 transition-transform">
                <iconify-icon icon="lucide:chevron-left" class="text-xl"></iconify-icon>
            </a>
            <div class="w-10 h-10 bg-gradient-to-tr from-blue-600 to-teal-400 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/10">
                <iconify-icon icon="lucide:building-2" class="text-white text-xl"></iconify-icon>
            </div>
            <div class="w-10"></div>
        </header>

        <main class="flex-1 flex flex-col px-6">
            
            <!-- STEP 1: IDENTIFICATION (Default) -->
            <div id="step-id" class="step-view flex flex-col gap-6">
                <div>
                    <h1 class="text-3xl font-bold text-slate-900 tracking-tight mb-2">Forgot Password?</h1>
                    <p class="text-slate-500 text-base leading-relaxed">No worries, it happens to the best of us. Enter your email to receive a secure recovery code.</p>
                </div>

                <div class="space-y-4">
                    <div class="space-y-1">
                        <label class="text-xs font-semibold text-slate-500 ml-1 uppercase tracking-wider">Community Email</label>
                        <div class="ios-input group flex items-center bg-white rounded-2xl border border-slate-200 px-4 h-14 transition-all duration-300">
                            <iconify-icon icon="lucide:mail" class="text-slate-400 text-xl mr-3 group-focus-within:text-blue-500 transition-colors"></iconify-icon>
                            <input type="email" placeholder="your@email.com" class="flex-1 bg-transparent border-none outline-none text-slate-900 placeholder:text-slate-300 text-base font-medium h-full">
                        </div>
                    </div>

                    <button onclick="goToStep('step-id', 'step-code')" class="w-full h-14 bg-slate-900 hover:bg-slate-800 active:scale-[0.98] transition-all rounded-2xl text-white font-semibold text-lg shadow-xl shadow-slate-900/10 flex items-center justify-center gap-2">
                        <span>Send Code</span>
                        <iconify-icon icon="lucide:send" class="text-lg opacity-80"></iconify-icon>
                    </button>
                </div>
            </div>

            <!-- STEP 2: VERIFICATION CODE (Hidden) -->
            <div id="step-code" class="step-view hidden opacity-0 translate-x-12 flex flex-col gap-6">
                <div>
                    <div class="w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-600 mb-6">
                        <iconify-icon icon="lucide:shield-check" class="text-2xl"></iconify-icon>
                    </div>
                    <h1 class="text-3xl font-bold text-slate-900 tracking-tight mb-2">Verify it's you</h1>
                    <p class="text-slate-500 text-base leading-relaxed">We've sent a 4-digit code to your email. Please enter it below to continue.</p>
                </div>

                <div class="flex justify-between gap-4 py-4">
                    <input type="text" maxlength="1" class="code-input w-16 h-16 bg-white border border-slate-200 rounded-2xl text-center text-2xl font-bold text-slate-900 outline-none transition-all">
                    <input type="text" maxlength="1" class="code-input w-16 h-16 bg-white border border-slate-200 rounded-2xl text-center text-2xl font-bold text-slate-900 outline-none transition-all">
                    <input type="text" maxlength="1" class="code-input w-16 h-16 bg-white border border-slate-200 rounded-2xl text-center text-2xl font-bold text-slate-900 outline-none transition-all">
                    <input type="text" maxlength="1" class="code-input w-16 h-16 bg-white border border-slate-200 rounded-2xl text-center text-2xl font-bold text-slate-900 outline-none transition-all">
                </div>

                <div class="space-y-4">
                    <button onclick="goToStep('step-code', 'step-reset')" class="w-full h-14 bg-blue-600 hover:bg-blue-700 active:scale-[0.98] transition-all rounded-2xl text-white font-semibold text-lg shadow-xl shadow-blue-500/20">
                        Verify Code
                    </button>
                    <button class="w-full py-2 text-sm font-bold text-blue-600 hover:text-blue-700">
                        Didn't receive code? Resend (45s)
                    </button>
                </div>
            </div>

            <!-- STEP 3: NEW PASSWORD (Hidden) -->
            <div id="step-reset" class="step-view hidden opacity-0 translate-x-12 flex flex-col gap-6">
                <div>
                    <h1 class="text-3xl font-bold text-slate-900 tracking-tight mb-2">New Password</h1>
                    <p class="text-slate-500 text-base leading-relaxed">Secure your account with a strong, memorable password.</p>
                </div>

                <div class="space-y-4">
                    <div class="space-y-1">
                        <label class="text-xs font-semibold text-slate-500 ml-1 uppercase tracking-wider">New Password</label>
                        <div class="ios-input group flex items-center bg-white rounded-2xl border border-slate-200 px-4 h-14">
                            <iconify-icon icon="lucide:lock" class="text-slate-400 text-xl mr-3"></iconify-icon>
                            <input type="password" placeholder="Min. 8 characters" class="flex-1 bg-transparent border-none outline-none text-slate-900 font-medium">
                            <button class="text-slate-300"><iconify-icon icon="lucide:eye" class="text-lg"></iconify-icon></button>
                        </div>
                        <!-- Strength Indicator -->
                        <div class="flex gap-1.5 mt-3 px-1">
                            <div class="h-1.5 flex-1 rounded-full bg-blue-500"></div>
                            <div class="h-1.5 flex-1 rounded-full bg-blue-500"></div>
                            <div class="h-1.5 flex-1 rounded-full bg-blue-500"></div>
                            <div class="h-1.5 flex-1 rounded-full bg-slate-200"></div>
                        </div>
                        <p class="text-[11px] text-blue-600 font-bold px-1 mt-1">Strong Password</p>
                    </div>

                    <div class="space-y-1">
                        <label class="text-xs font-semibold text-slate-500 ml-1 uppercase tracking-wider">Confirm Password</label>
                        <div class="ios-input group flex items-center bg-white rounded-2xl border border-slate-200 px-4 h-14">
                            <iconify-icon icon="lucide:check-circle" class="text-slate-400 text-xl mr-3"></iconify-icon>
                            <input type="password" placeholder="Repeat password" class="flex-1 bg-transparent border-none outline-none text-slate-900 font-medium">
                        </div>
                    </div>

                    <button onclick="goToStep('step-reset', 'step-success')" class="w-full h-14 bg-slate-900 active:scale-[0.98] transition-all rounded-2xl text-white font-semibold text-lg shadow-xl shadow-slate-900/10 mt-2">
                        Reset Password
                    </button>
                </div>
            </div>

            <!-- STEP 4: SUCCESS (Hidden) -->
            <div id="step-success" class="step-view hidden opacity-0 scale-90 flex-1 flex flex-col items-center justify-center text-center pb-20">
                <div class="relative mb-8">
                    <div class="absolute inset-0 bg-teal-500/20 blur-2xl rounded-full animate-pulse"></div>
                    <div class="w-24 h-24 bg-teal-500 rounded-full flex items-center justify-center text-white text-5xl shadow-2xl shadow-teal-500/30">
                        <iconify-icon icon="lucide:check-circle"></iconify-icon>
                    </div>
                </div>
                <h1 class="text-3xl font-bold text-slate-900 mb-4">Password Updated</h1>
                <p class="text-slate-500 text-base leading-relaxed px-4 mb-10">Your account is now secure with your new password. You can now log back into the community.</p>
                
                <a id="success-login-btn" href="https://p.superdesign.dev/draft/c6843c32-7c38-41c2-82c2-dc47929810cc" class="w-full h-14 bg-slate-900 rounded-2xl text-white font-semibold text-lg shadow-xl shadow-slate-900/10 flex items-center justify-center gap-2">
                    Back to Sign In
                </a>
            </div>

        </main>

        <!-- Help Footer -->
        <footer id="help-footer" class="px-6 text-center">
            <p class="text-slate-400 text-sm">
                Need more help? <a href="#support" class="text-blue-600 font-bold hover:underline">Contact Support</a>
            </p>
        </footer>

    </div>

    <script>
        function goToStep(currentId, nextId) {
            const current = document.getElementById(currentId);
            const next = document.getElementById(nextId);
            const footer = document.getElementById('help-footer');

            // Hide current
            current.classList.add('opacity-0', '-translate-x-12');
            
            setTimeout(() => {
                current.classList.add('hidden');
                
                // Show next
                next.classList.remove('hidden');
                
                // Force reflow
                void next.offsetWidth;
                
                next.classList.remove('opacity-0', 'translate-x-12', 'scale-90');
                
                // Hide footer on success
                if (nextId === 'step-success') {
                    footer.classList.add('hidden');
                }
            }, 400);
        }

        // Auto-focus code inputs
        document.querySelectorAll('.code-input').forEach((input, idx, inputs) => {
            input.addEventListener('input', (e) => {
                if (e.target.value.length === 1 && idx < inputs.length - 1) {
                    inputs[idx + 1].focus();
                }
            });
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && !e.target.value && idx > 0) {
                    inputs[idx - 1].focus();
                }
            });
        });
    </script>
</body>
</html>